-- MySQL Script generated by MySQL Workbench
-- Fri Mar 20 18:49:01 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `escola` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `escola` DEFAULT CHARACTER SET utf8 ;
SHOW WARNINGS;
USE `escola` ;

-- -----------------------------------------------------
-- Table `PESSOA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PESSOA` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `PESSOA` (
  `ID_PESSOA` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(45) NOT NULL,
  `CPF` VARCHAR(45) NOT NULL,
  `DT_NASC` DATE NOT NULL,
  `TIPO_PESSOA` TINYINT(2) NOT NULL,
  PRIMARY KEY (`ID_PESSOA`))
ENGINE = InnoDB;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `ALUNO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ALUNO` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `ALUNO` (
  `ID_ALUNO` INT NOT NULL AUTO_INCREMENT,
  `ID_PESSOA` INT NOT NULL,
  PRIMARY KEY (`ID_ALUNO`),
  CONSTRAINT `fk_ALUNO_PESSOA1`
    FOREIGN KEY (`ID_PESSOA`)
    REFERENCES `PESSOA` (`ID_PESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_ALUNO_PESSOA1_idx` ON `ALUNO` (`ID_PESSOA` ASC);

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `PROFESSOR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PROFESSOR` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `PROFESSOR` (
  `ID_PROFESSOR` INT NOT NULL AUTO_INCREMENT,
  `ID_PESSOA` INT NOT NULL,
  PRIMARY KEY (`ID_PROFESSOR`),
  CONSTRAINT `fk_PROFESSOR_PESSOA1`
    FOREIGN KEY (`ID_PESSOA`)
    REFERENCES `PESSOA` (`ID_PESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_PROFESSOR_PESSOA1_idx` ON `PROFESSOR` (`ID_PESSOA` ASC);

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `TURMA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `TURMA` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `TURMA` (
  `ID_TURMA` INT NOT NULL AUTO_INCREMENT,
  `DESC` VARCHAR(45) NOT NULL,
  `DT_INI` DATE NOT NULL,
  `DT_FIM` DATE NOT NULL,
  `SEMESTRE` INT NOT NULL,
  PRIMARY KEY (`ID_TURMA`))
ENGINE = InnoDB;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `CURSO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CURSO` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `CURSO` (
  `ID_CURSO` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(45) NOT NULL,
  `ATIVO` TINYINT(2) NULL,
  PRIMARY KEY (`ID_CURSO`))
ENGINE = InnoDB;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `ALUNO_TURMA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ALUNO_TURMA` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `ALUNO_TURMA` (
  `ID_ALUNO_TURMA` INT NOT NULL AUTO_INCREMENT,
  `ID_ALUNO` INT NOT NULL,
  `ID_TURMA` INT NOT NULL,
  `ID_CURSO` INT NOT NULL,
  PRIMARY KEY (`ID_ALUNO_TURMA`),
  CONSTRAINT `fk_ALUNO_has_TURMA_ALUNO`
    FOREIGN KEY (`ID_ALUNO`)
    REFERENCES `ALUNO` (`ID_ALUNO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ALUNO_has_TURMA_TURMA1`
    FOREIGN KEY (`ID_TURMA`)
    REFERENCES `TURMA` (`ID_TURMA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ALUNO_TURMA_CURSO1`
    FOREIGN KEY (`ID_CURSO`)
    REFERENCES `CURSO` (`ID_CURSO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_ALUNO_has_TURMA_TURMA1_idx` ON `ALUNO_TURMA` (`ID_TURMA` ASC);

SHOW WARNINGS;
CREATE INDEX `fk_ALUNO_has_TURMA_ALUNO_idx` ON `ALUNO_TURMA` (`ID_ALUNO` ASC);

SHOW WARNINGS;
CREATE INDEX `fk_ALUNO_TURMA_CURSO1_idx` ON `ALUNO_TURMA` (`ID_CURSO` ASC);

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `PERIODO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `PERIODO` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `PERIODO` (
  `ID_PERIODO` INT NOT NULL AUTO_INCREMENT,
  `PERIODO` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID_PERIODO`))
ENGINE = InnoDB;

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `MATERIA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `MATERIA` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `MATERIA` (
  `ID_MATERIA` INT NOT NULL AUTO_INCREMENT,
  `ID_PERIODO` INT NOT NULL,
  `NOME` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID_MATERIA`),
  CONSTRAINT `fk_MATERIA_PERIODO1`
    FOREIGN KEY (`ID_PERIODO`)
    REFERENCES `PERIODO` (`ID_PERIODO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_MATERIA_PERIODO1_idx` ON `MATERIA` (`ID_PERIODO` ASC);

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `ALUNO_TURMA_MATERIA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ALUNO_TURMA_MATERIA` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `ALUNO_TURMA_MATERIA` (
  `ID_TURMA_MATERIA` INT NOT NULL AUTO_INCREMENT,
  `ID_ALUNO_TURMA` VARCHAR(45) NOT NULL,
  `ID_MATERIA` INT NOT NULL,
  PRIMARY KEY (`ID_TURMA_MATERIA`),
  CONSTRAINT `fk_ALUNO_TURMA_has_MATERIA_ALUNO_TURMA1`
    FOREIGN KEY (`ID_ALUNO_TURMA`)
    REFERENCES `ALUNO_TURMA` (`ID_ALUNO_TURMA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ALUNO_TURMA_has_MATERIA_MATERIA1`
    FOREIGN KEY (`ID_MATERIA`)
    REFERENCES `MATERIA` (`ID_MATERIA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_ALUNO_TURMA_has_MATERIA_MATERIA1_idx` ON `ALUNO_TURMA_MATERIA` (`ID_MATERIA` ASC);

SHOW WARNINGS;
CREATE INDEX `fk_ALUNO_TURMA_has_MATERIA_ALUNO_TURMA1_idx` ON `ALUNO_TURMA_MATERIA` (`ID_ALUNO_TURMA` ASC);

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `DIARIO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DIARIO` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `DIARIO` (
  `ID_TURMA_MATERIA` VARCHAR(45) NOT NULL,
  `ID_PROFESSOR` INT NOT NULL,
  `DATA` DATE NOT NULL,
  `QTDE_AULAS_DIA` INT(11) NOT NULL,
  `QTDE_FALTAS` INT(11) NOT NULL,
  PRIMARY KEY (`ID_TURMA_MATERIA`, `ID_PROFESSOR`),
  CONSTRAINT `fk_ALUNO_TURMA_has_MATERIA_has_PROFESSOR_ALUNO_TURMA_has_MATE1`
    FOREIGN KEY (`ID_TURMA_MATERIA`)
    REFERENCES `ALUNO_TURMA_MATERIA` (`ID_TURMA_MATERIA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ALUNO_TURMA_has_MATERIA_has_PROFESSOR_PROFESSOR1`
    FOREIGN KEY (`ID_PROFESSOR`)
    REFERENCES `PROFESSOR` (`ID_PROFESSOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_ALUNO_TURMA_has_MATERIA_has_PROFESSOR_PROFESSOR1_idx` ON `DIARIO` (`ID_PROFESSOR` ASC);

SHOW WARNINGS;
CREATE INDEX `fk_ALUNO_TURMA_has_MATERIA_has_PROFESSOR_ALUNO_TURMA_has_MA_idx` ON `DIARIO` (`ID_TURMA_MATERIA` ASC);

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `CURSO_MATERIA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CURSO_MATERIA` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `CURSO_MATERIA` (
  `ID_CURSO_MATERIA` INT NOT NULL AUTO_INCREMENT,
  `ID_CURSO` INT NOT NULL,
  `ID_MATERIA` INT NOT NULL,
  PRIMARY KEY (`ID_CURSO_MATERIA`),
  CONSTRAINT `fk_CURSO_has_MATERIA_CURSO1`
    FOREIGN KEY (`ID_CURSO`)
    REFERENCES `CURSO` (`ID_CURSO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CURSO_has_MATERIA_MATERIA1`
    FOREIGN KEY (`ID_MATERIA`)
    REFERENCES `MATERIA` (`ID_MATERIA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_CURSO_has_MATERIA_MATERIA1_idx` ON `CURSO_MATERIA` (`ID_MATERIA` ASC);

SHOW WARNINGS;
CREATE INDEX `fk_CURSO_has_MATERIA_CURSO1_idx` ON `CURSO_MATERIA` (`ID_CURSO` ASC);

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `CONTATO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CONTATO` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `CONTATO` (
  `ID_CONTATO` INT NOT NULL AUTO_INCREMENT,
  `ID_PESSOA` INT NOT NULL,
  `EMAIL` VARCHAR(45) NULL,
  `TELEFONE` VARCHAR(45) NULL,
  `CELULAR` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID_CONTATO`),
  CONSTRAINT `fk_CONTATO_PESSOA1`
    FOREIGN KEY (`ID_PESSOA`)
    REFERENCES `PESSOA` (`ID_PESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_CONTATO_PESSOA1_idx` ON `CONTATO` (`ID_PESSOA` ASC);

SHOW WARNINGS;

-- -----------------------------------------------------
-- Table `FOTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `FOTO` ;

SHOW WARNINGS;
CREATE TABLE IF NOT EXISTS `FOTO` (
  `ID_FOTO` INT NOT NULL AUTO_INCREMENT,
  `ID_PESSOA` INT NOT NULL,
  `FOTO` BLOB NOT NULL,
  PRIMARY KEY (`ID_FOTO`),
  CONSTRAINT `fk_FOTO_PESSOA1`
    FOREIGN KEY (`ID_PESSOA`)
    REFERENCES `PESSOA` (`ID_PESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SHOW WARNINGS;
CREATE INDEX `fk_FOTO_PESSOA1_idx` ON `FOTO` (`ID_PESSOA` ASC);

SHOW WARNINGS;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
